{"version":3,"sources":["webpack:///react-1.js","webpack:///./src/pages/neo/menu-react/index.tsx","webpack:///./src/pages/neo/menu-react/SetStateCallback.tsx"],"names":["webpackJsonp","156","module","exports","__webpack_require__","Object","defineProperty","value","__exportStar","295","tslib_1","base_1","LEARN","SetStateCallback","_super","_this","apply","this","arguments","state","count","logger","label","key","args","_i","length","console","log","concat","logSeparate","repeat","__extends","prototype","logSetStateCountTo","callback","text","setState","componentWillMount","reactButtonClick","e","reactButtonPropagationClick","manualButtonClick","manualButtonPropagationClick","componentDidMount","manualButton","addEventListener","manualDiv","setTimeoutTest","setTimeout","render","React","createElement","Page","name","title","app","rp","className","HTML","simple","trim","style","margin","onClick","ref","__decorate","autobind","page","PageComponent"],"mappings":"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","file":"react-1.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 156:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(1);\r\ntslib_1.__exportStar(__webpack_require__(295), exports);\r\n\n\n/***/ }),\n\n/***/ 295:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(1);\r\nvar base_1 = __webpack_require__(21);\r\nvar LEARN = \"\\n\\u5728 react \\u4E2D\\uFF0CsetState({...}, callback) \\u4E2D\\u7684 callback \\u6267\\u884C\\u65F6\\u95F4\\u53D7\\u8C03\\u7528\\u7684\\u51FD\\u6570\\u4E0D\\u540C\\u800C\\u4E0D\\u540C\\uFF0C\\u8BE6\\u60C5\\u5982\\u4E0B\\uFF1A\\n\\n1. \\u5728 react \\u7684\\u751F\\u547D\\u5468\\u671F\\u7684\\u51FD\\u6570\\u4E2D\\u4F7F\\u7528 setState \\u65F6\\uFF0C\\u4E0D\\u4F1A\\u7ACB\\u5373\\u89E6\\u53D1 render\\uFF1B\\u800C\\u662F\\u5728\\u751F\\u547D\\u5468\\u671F\\u51FD\\u6570\\u6267\\u884C\\u5B8C\\u540E\\uFF0C\\u7EDF\\u4E00\\u89E6\\u53D1 render\\uFF0C\\u518D\\u7EDF\\u4E00\\u8C03\\u7528 setState \\u4E2D\\u6307\\u5B9A\\u7684 callback\\n2. \\u5728 react dom \\u4E0A\\u7ED1\\u5B9A\\u7684\\u4E8B\\u4EF6\\u7684\\u56DE\\u8C03\\u51FD\\u6570\\u4E2D\\u8C03\\u7528 setState\\uFF0C\\u4E5F\\u4E0D\\u4F1A\\u7ACB\\u5373\\u89E6\\u53D1 render,\\u800C\\u662F\\u5728 dom \\u94FE\\u4E0A\\u7684\\u6240\\u6709\\u56DE\\u8C03\\u51FD\\u6570\\u90FD\\u6267\\u884C\\u5B8C\\u540E\\uFF0C\\u518D\\u7EDF\\u4E00\\u89E6\\u53D1 render \\u548C callback \\uFF0C\\u8FD9\\u662F\\u56E0\\u4E3A react \\u5C01\\u88C5\\u4E86\\u6240\\u6709\\u7684\\u4E8B\\u4EF6\\uFF0C\\u5B83\\u4F1A\\u5728 body \\u5143\\u7D20\\u7ED1\\u5B9A\\u4E00\\u4E2A\\u76D1\\u542C\\uFF0C\\u901A\\u8FC7\\u4EE3\\u7406\\u7684\\u5F62\\u5F0F\\u6765\\u5904\\u7406\\n3. \\u624B\\u52A8\\u7ED1\\u5B9A\\u4E8B\\u4EF6\\uFF0C\\u6216\\u5176\\u5B83\\u4E0D\\u53D7 react \\u63A7\\u5236\\u7684\\u5F02\\u6B65\\u56DE\\u8C03\\u4E2D\\u8C03\\u7528 setState \\u65F6\\uFF0C\\u4F1A\\u7ACB\\u5373 render\\uFF0Crender \\u5B8C\\u540E\\u8C03\\u7528 callback\\uFF1B\\u5373\\u5982\\u679C\\u5728\\u8FD9\\u4E9B\\u51FD\\u6570\\u5185\\u8C03\\u7528\\u4E24\\u6B21 setState\\uFF0C\\u4F1A\\u89E6\\u53D1\\u4E24\\u6B21 render\\n\";\r\nvar SetStateCallback = (function (_super) {\r\n    tslib_1.__extends(SetStateCallback, _super);\r\n    function SetStateCallback() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = { count: 0 };\r\n        _this.logger = function (label) { return function (key) {\r\n            var args = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                args[_i - 1] = arguments[_i];\r\n            }\r\n            return console.log.apply(console, [\"%c\" + label + \": %c\" + key, 'color: blue; font-weight: bold;', 'color: red'].concat(args));\r\n        }; };\r\n        _this.logSeparate = function () { return console.log('='.repeat(50)); };\r\n        return _this;\r\n    }\r\n    SetStateCallback.prototype.logSetStateCountTo = function (label, count, callback) {\r\n        var log = this.logger(label);\r\n        var text = \"{count: \" + count + \"}\";\r\n        log('setStateStart', text);\r\n        this.setState({ count: count }, function () {\r\n            log('setStateCallback', text);\r\n            if (callback)\r\n                callback();\r\n        });\r\n        log('setStateEnd', text);\r\n    };\r\n    SetStateCallback.prototype.componentWillMount = function () {\r\n        this.logSetStateCountTo('componentWillMount', 1);\r\n        this.logSetStateCountTo('componentWillMount', 2, this.logSeparate);\r\n    };\r\n    SetStateCallback.prototype.reactButtonClick = function (e) {\r\n        this.logSetStateCountTo('reactButtonClick', 11);\r\n        this.logSetStateCountTo('reactButtonClick', 12);\r\n    };\r\n    SetStateCallback.prototype.reactButtonPropagationClick = function (e) {\r\n        this.logSetStateCountTo('reactButtonPropagationClick', 13, this.logSeparate);\r\n    };\r\n    SetStateCallback.prototype.manualButtonClick = function (e) {\r\n        this.logSetStateCountTo('manualButtonClick', 21);\r\n        this.logSetStateCountTo('manualButtonClick', 22);\r\n    };\r\n    SetStateCallback.prototype.manualButtonPropagationClick = function (e) {\r\n        this.logSetStateCountTo('manualButtonPropagationClick', 23);\r\n        this.logSeparate();\r\n    };\r\n    SetStateCallback.prototype.componentDidMount = function () {\r\n        this.manualButton.addEventListener('click', this.manualButtonClick);\r\n        this.manualDiv.addEventListener('click', this.manualButtonPropagationClick);\r\n    };\r\n    SetStateCallback.prototype.setTimeoutTest = function () {\r\n        var _this = this;\r\n        setTimeout(function () {\r\n            _this.logSetStateCountTo('setTimeoutTest', 31);\r\n            _this.logSetStateCountTo('setTimeoutTest', 32);\r\n            _this.logSeparate();\r\n        });\r\n    };\r\n    SetStateCallback.prototype.render = function () {\r\n        var _this = this;\r\n        console.log('%crender', 'color:purple');\r\n        return (base_1.React.createElement(base_1.Page, { name: 'SetStateCallback', title: this.app.rp.SetStateCallback.title, className: 'gGap' },\r\n            base_1.React.createElement(base_1.HTML, { className: 'learn', simple: true, value: LEARN.trim() }),\r\n            base_1.React.createElement(\"p\", { className: 'gTextCenter note' }, \"\\u6253\\u5F00\\u5F00\\u53D1\\u8005\\u5DE5\\u5177\\u67E5\\u770B console.log \\u7684\\u7ED3\\u679C~\"),\r\n            base_1.React.createElement(\"p\", { className: 'gTextCenter' },\r\n                \"count: \",\r\n                this.state.count),\r\n            base_1.React.createElement(\"div\", { style: { margin: '1em 0' }, onClick: this.reactButtonPropagationClick },\r\n                base_1.React.createElement(\"button\", { className: 'gCenter', onClick: this.reactButtonClick }, \"\\u89E6\\u53D1\\u901A\\u8FC7 react \\u7ED1\\u5B9A\\u7684\\u4E8B\\u4EF6\"),\r\n                base_1.React.createElement(\"div\", { className: 'note' },\r\n                    base_1.React.createElement(base_1.HTML, { simple: true, value: \"\\u70B9\\u51FB\\u540E\\u6240\\u6709\\u76F8\\u5173\\u7684 handle \\u90FD\\u4F1A\\u8C03\\u7528\\uFF0C\\u7136\\u540E\\u624D\\u4F1A\\u89E6\\u53D1\\u6240\\u6709\\u7684 callback \\u88AB\\u8C03\\u7528\" }))),\r\n            base_1.React.createElement(\"div\", { style: { margin: '1em 0' }, ref: function (e) { return _this.manualDiv = e; } },\r\n                base_1.React.createElement(\"button\", { className: 'gCenter', ref: function (e) { return _this.manualButton = e; } }, \"\\u89E6\\u53D1\\u901A\\u8FC7 \\u624B\\u52A8 \\u7ED1\\u5B9A\\u7684\\u4E8B\\u4EF6\"),\r\n                base_1.React.createElement(\"div\", { className: 'note' },\r\n                    base_1.React.createElement(base_1.HTML, { simple: true, value: \"\\u70B9\\u51FB\\u540E\\u76F8\\u5173\\u7684 handle \\u4E2D\\u7684 setState \\u6267\\u884C\\u540E\\u7ACB\\u5373\\u4F1A\\u89E6\\u53D1 callback \\u88AB\\u8C03\\u7528\" }))),\r\n            base_1.React.createElement(\"div\", { style: { margin: '1em 0' } },\r\n                base_1.React.createElement(\"button\", { className: 'gCenter', onClick: this.setTimeoutTest }, \"\\u89E6\\u53D1 setTimeout \\u7684\\u56DE\\u8C03\"),\r\n                base_1.React.createElement(\"div\", { className: 'note' },\r\n                    base_1.React.createElement(base_1.HTML, { simple: true, value: \"\\u548C\\u4E0A\\u4E00\\u4E2A\\u7ED3\\u679C\\u7C7B\\u4F3C\\uFF0Ccallback \\u4F1A\\u7ACB\\u5373\\u88AB\\u8C03\\u7528\" })))));\r\n    };\r\n    tslib_1.__decorate([\r\n        base_1.autobind\r\n    ], SetStateCallback.prototype, \"reactButtonClick\", null);\r\n    tslib_1.__decorate([\r\n        base_1.autobind\r\n    ], SetStateCallback.prototype, \"reactButtonPropagationClick\", null);\r\n    tslib_1.__decorate([\r\n        base_1.autobind\r\n    ], SetStateCallback.prototype, \"manualButtonClick\", null);\r\n    tslib_1.__decorate([\r\n        base_1.autobind\r\n    ], SetStateCallback.prototype, \"manualButtonPropagationClick\", null);\r\n    tslib_1.__decorate([\r\n        base_1.autobind\r\n    ], SetStateCallback.prototype, \"setTimeoutTest\", null);\r\n    SetStateCallback = tslib_1.__decorate([\r\n        base_1.page\r\n    ], SetStateCallback);\r\n    return SetStateCallback;\r\n}(base_1.PageComponent));\r\nexports.SetStateCallback = SetStateCallback;\r\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// react-1.js","export * from './SetStateCallback'\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/mora-common/helper/index-loader?{\"modules\":[{\"debug\":false,\"name\":\"mora-common\",\"realtimeParse\":true},{\"debug\":true,\"name\":\"mora-scripts\"},{\"debug\":false,\"name\":\"antd\"}]}!./src/pages/neo/menu-react/index.tsx","/**\n * Create by Mora at 2017-09-28 17:58\n * All right reserved\n */\n\nimport {React, PageComponent, Page, page, HTML, autobind} from '../base'\n\nconst LEARN = `\n在 react 中，setState({...}, callback) 中的 callback 执行时间受调用的函数不同而不同，详情如下：\n\n1. 在 react 的生命周期的函数中使用 setState 时，不会立即触发 render；而是在生命周期函数执行完后，统一触发 render，再统一调用 setState 中指定的 callback\n2. 在 react dom 上绑定的事件的回调函数中调用 setState，也不会立即触发 render,而是在 dom 链上的所有回调函数都执行完后，再统一触发 render 和 callback ，这是因为 react 封装了所有的事件，它会在 body 元素绑定一个监听，通过代理的形式来处理\n3. 手动绑定事件，或其它不受 react 控制的异步回调中调用 setState 时，会立即 render，render 完后调用 callback；即如果在这些函数内调用两次 setState，会触发两次 render\n`\n\n@page\nexport class SetStateCallback extends PageComponent<any, {count: number}> {\n  state = {count: 0}\n  manualButton: HTMLButtonElement\n  manualDiv: HTMLDivElement\n\n  logger = (label) => (key, ...args) => console.log(`%c${label}: %c${key}`, 'color: blue; font-weight: bold;', 'color: red', ...args)\n  logSeparate = () => console.log('='.repeat(50))\n  logSetStateCountTo(label: string, count: number, callback?) {\n    let log = this.logger(label)\n    let text = `{count: ${count}}`\n    log('setStateStart', text)\n    this.setState({count}, () => {\n      log('setStateCallback', text)\n      if (callback) callback()\n    })\n    log('setStateEnd', text)\n  }\n\n  componentWillMount() {\n    this.logSetStateCountTo('componentWillMount', 1)\n    this.logSetStateCountTo('componentWillMount', 2, this.logSeparate)\n  }\n\n  // react 绑定事件回调函数\n  @autobind reactButtonClick(e: React.MouseEvent<any>) {\n    this.logSetStateCountTo('reactButtonClick', 11)\n    this.logSetStateCountTo('reactButtonClick', 12)\n  }\n\n  @autobind reactButtonPropagationClick(e: React.MouseEvent<any>) {\n    this.logSetStateCountTo('reactButtonPropagationClick', 13, this.logSeparate)\n  }\n\n  // 手动绑定事件回调函数\n  @autobind manualButtonClick(e: MouseEvent) {\n    this.logSetStateCountTo('manualButtonClick', 21)\n    this.logSetStateCountTo('manualButtonClick', 22)\n  }\n\n  @autobind manualButtonPropagationClick(e: MouseEvent) {\n    this.logSetStateCountTo('manualButtonPropagationClick', 23)\n    this.logSeparate()\n  }\n\n  componentDidMount() {\n    this.manualButton.addEventListener('click', this.manualButtonClick)\n    this.manualDiv.addEventListener('click', this.manualButtonPropagationClick)\n  }\n\n  // setTimeout\n  @autobind setTimeoutTest() {\n    setTimeout(() => {\n      this.logSetStateCountTo('setTimeoutTest', 31)\n      this.logSetStateCountTo('setTimeoutTest', 32)\n      this.logSeparate()\n    })\n  }\n\n  render() {\n    console.log('%crender', 'color:purple')\n    return (\n      <Page name='SetStateCallback' title={this.app.rp.SetStateCallback.title} className='gGap'>\n        <HTML className='learn' simple value={LEARN.trim()} />\n\n        <p className='gTextCenter note'>打开开发者工具查看 console.log 的结果~</p>\n        <p className='gTextCenter'>count: {this.state.count}</p>\n        <div style={{margin: '1em 0'}} onClick={this.reactButtonPropagationClick}>\n          <button className='gCenter' onClick={this.reactButtonClick}>触发通过 react 绑定的事件</button>\n          <div className='note'>\n            <HTML simple value={`点击后所有相关的 handle 都会调用，然后才会触发所有的 callback 被调用`} />\n          </div>\n        </div>\n\n        <div style={{margin: '1em 0'}} ref={e => this.manualDiv = e}>\n          <button className='gCenter' ref={e => this.manualButton = e}>触发通过 手动 绑定的事件</button>\n          <div className='note'>\n            <HTML simple value={`点击后相关的 handle 中的 setState 执行后立即会触发 callback 被调用`} />\n          </div>\n        </div>\n\n        <div style={{margin: '1em 0'}}>\n          <button className='gCenter' onClick={this.setTimeoutTest}>触发 setTimeout 的回调</button>\n          <div className='note'>\n            <HTML simple value={`和上一个结果类似，callback 会立即被调用`} />\n          </div>\n        </div>\n      </Page>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/mora-common/helper/index-loader??ref--0-1!./src/pages/neo/menu-react/SetStateCallback.tsx"],"sourceRoot":""}